(this["webpackJsonprest-api-node-react"]=this["webpackJsonprest-api-node-react"]||[]).push([[0],{16:function(e,t,a){},34:function(e,t,a){e.exports=a.p+"static/media/default.739297c3.png"},36:function(e,t,a){e.exports=a(63)},63:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(12),c=a.n(s),i=a(11),l=a(1),m=a(15),o=a(13),u=a.n(o),h=function(e){var t=Object(n.useState)(""),a=Object(m.a)(t,2),s=a[0],c=a[1],o=Object(n.useState)(""),h=Object(m.a)(o,2),p=h[0],d=h[1],v=e.baseUrl+"/api/auth",f=Object(l.h)(),b=Object(l.g)(),E=(f.state||{from:{pathname:"/"}}).from;function g(e){"email"===e.target.name&&c(e.target.value),"password"===e.target.name&&d(e.target.value)}return r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),u.a.post(v,{email:s,password:p}).then((function(e){document.cookie="my-token="+e.data+"; max-age=60;",b.push(E)})).catch((function(e){console.log(e)}))}},r.a.createElement("div",{className:"box"},r.a.createElement("h1",null,"Login"),r.a.createElement("input",{onChange:g,type:"email",name:"email",className:"email",placeholder:"freddie.mercury@gmail.com",size:"35",value:s}),r.a.createElement("input",{onChange:g,type:"password",name:"password",className:"email",placeholder:"queen_rox",size:"35",value:p}),r.a.createElement("input",{class:"btn",type:"submit",value:"Sign In"}),r.a.createElement("div",{id:"btn2"},r.a.createElement(i.b,{to:"/signup"},r.a.createElement("span",{className:"noDecoration"},"Sign Up")))))};var p=function(e){for(var t=document.cookie.split(";"),a=0;a<t.length;a++){var n=t[a].split("=");if(console.log(n),e===n[0].trim())return n[1]}return null};var d=function(){return null!=p("my-token")};var v=function(e){return r.a.createElement(l.b,{render:function(){return d()?e.children:r.a.createElement(l.a,{to:{pathname:"/login",state:{from:e.location}}})}})},f=function(e){var t=Object(n.useState)(""),a=Object(m.a)(t,2),s=a[0],c=a[1],o=Object(n.useState)(""),h=Object(m.a)(o,2),p=h[0],d=h[1],v=Object(n.useState)(""),f=Object(m.a)(v,2),b=f[0],E=f[1],g=e.baseUrl+"/api/users",O=Object(l.h)(),j=Object(l.g)(),y=(O.state||{from:{pathname:"/"}}).from;function N(e){"name"===e.target.name&&E(e.target.value),"email"===e.target.name&&c(e.target.value),"password"===e.target.name&&d(e.target.value)}return r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),u.a.post(g,{name:b,email:s,password:p}).then((function(e){j.push(y)})).catch((function(e){console.log(e)}))}},r.a.createElement("div",{className:"box"},r.a.createElement("h1",null,"Sign Up"),r.a.createElement("input",{onChange:N,type:"text",name:"name",className:"email",placeholder:"freddie mercury",size:"35",value:b}),r.a.createElement("input",{onChange:N,type:"email",name:"email",className:"email",placeholder:"freddie.mercury@gmail.com",size:"35",value:s}),r.a.createElement("input",{onChange:N,type:"password",name:"password",className:"email",placeholder:"queen_rox",size:"35",value:p}),r.a.createElement("input",{class:"btn",type:"submit",value:"Register"}),r.a.createElement("div",{id:"btn2"},r.a.createElement(i.b,{to:"/login"},"Sign In"))))},b=a(6),E=a(7),g=a(9),O=a(8),j=a(32),y=(a(16),function(e){Object(g.a)(a,e);var t=Object(O.a)(a);function a(e){var n;return Object(b.a)(this,a),(n=t.call(this,e)).state={rating:e.rating},n}return Object(E.a)(a,[{key:"render",value:function(){var e=[],t=0,a=Math.ceil(this.state.rating),n=Math.abs(this.state.rating)-Math.floor(this.state.rating);for(n>0&&a--;t<a;)e.push(r.a.createElement("span",{class:"fa fa-star checked"})),t++;for(n>0&&e.push(r.a.createElement("span",{class:"fa fa-star-half-full checked"}));e.length<5;)e.push(r.a.createElement("span",{class:"fa fa-star-o checked"}));return e=r.a.createElement("div",null,e)}}]),a}(r.a.Component)),N=a(35),k=a(34),w=a.n(k),S=function(e){Object(g.a)(a,e);var t=Object(O.a)(a);function a(e){var n;return Object(b.a)(this,a),(n=t.call(this,e)).state={reviewData:e.data},n}return Object(E.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{class:"container"},r.a.createElement("img",{src:this.state.reviewData.userImage||w.a,alt:"Avatar",className:"userImage"}),r.a.createElement("p",null,r.a.createElement("span",null,this.state.reviewData.userName)),r.a.createElement("p",null,this.state.reviewData.text),r.a.createElement(y,{rating:this.state.reviewData.rating}))}}]),a}(r.a.Component),C=function(e){Object(g.a)(a,e);var t=Object(O.a)(a);function a(e){var n;return Object(b.a)(this,a),(n=t.call(this,e)).updateState=function(){var e=p("my-token")||"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI1ZjYwOTkzODRlOTUzNzNkOWRjMmVmNGIiLCJpYXQiOjE2MDAxNjYyNDB9.-dw44t6uZ0vMhGqb-UKRFRaDeLWF2W56o_aAIjJ5prc";u.a.post("".concat("http://localhost:8080","/api/business/reviews"),{token:e,id:n.state.businessId}).then((function(e){n.setState({reviews:e.data})})).catch((function(e){console.log(e)}))},n.state={open:!1,businessId:e.id,businessName:e.name,review_count:e.count,reviews:[]},n}return Object(E.a)(a,[{key:"setOpen",value:function(e){this.updateState(),this.setState({open:e})}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{onClick:function(){return e.setOpen(!0)}},"Reviews"),r.a.createElement(N.a,{open:this.state.open,className:"overLayBox"},r.a.createElement("div",{className:"modalBox"},r.a.createElement("div",{className:"reviewHeaderContainer"},r.a.createElement("span",{class:"fa fa-times-circle-o fa-4x reviewCloseButton",onClick:function(){return e.setOpen(!1)}})),r.a.createElement("h1",{className:"reviewHeader"},this.state.businessName),r.a.createElement("div",{className:"reviewContainer"},this.state.reviews.map((function(e){return r.a.createElement(S,{key:e.id,data:e})}))))))}}]),a}(r.a.Component),I=function(e){Object(g.a)(a,e);var t=Object(O.a)(a);function a(e){var n;return Object(b.a)(this,a),(n=t.call(this,e)).state={data:e.data},n}return Object(E.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{class:"card"},r.a.createElement("img",{src:this.state.data.image,alt:"image"}),r.a.createElement("div",{class:"cardContainer"},r.a.createElement("h4",null,r.a.createElement("b",null,this.state.data.name)),r.a.createElement("p",null,this.state.data.address),r.a.createElement(y,{rating:this.state.data.rating}),r.a.createElement(C,{count:this.state.data.reviews,name:this.state.data.name,id:this.state.data.id})))}}]),a}(r.a.Component),D=function(e){Object(g.a)(a,e);var t=Object(O.a)(a);function a(e){var n;return Object(b.a)(this,a),(n=t.call(this,e)).state={items:e.items},n}return Object(E.a)(a,[{key:"componentWillReceiveProps",value:function(e){var t=e.items;this.setState(Object(j.a)({items:t},"items",t))}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"cardHolder"},this.state.items.map((function(e){return r.a.createElement(I,{key:e.id,data:e})}))))}}]),a}(r.a.Component),x=function(e){Object(g.a)(a,e);var t=Object(O.a)(a);function a(){var e;return Object(b.a)(this,a),(e=t.call(this)).state={searchTerm:"",submitted:!1,searching:!1,items:[]},e}return Object(E.a)(a,[{key:"handleSumbit",value:function(e){var t=this;e.preventDefault(),this.setState({searching:!0}),this.setState({items:[]});var a=this.state.searchTerm.split(","),n=a[0],r=a[1]||"redwood city, ca",s=p("my-token")||"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI1ZjYwOTkzODRlOTUzNzNkOWRjMmVmNGIiLCJpYXQiOjE2MDAxNjYyNDB9.-dw44t6uZ0vMhGqb-UKRFRaDeLWF2W56o_aAIjJ5prc";u.a.post("".concat("http://localhost:8080","/api/business/search"),{token:s,name:n,location:r}).then((function(e){t.setState({items:e.data}),t.setState({submitted:!0}),t.setState({searching:!1})})).catch((function(e){console.log(e)}))}},{key:"handleChange",value:function(e){this.setState({searchTerm:e.target.value})}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{className:"example",onSubmit:function(t){return e.handleSumbit(t)}},r.a.createElement("div",{className:"formInputs"},r.a.createElement("input",{type:"text",onChange:function(t){return e.handleChange(t)},placeholder:"Search..",name:"search",value:this.state.searchTerm}),r.a.createElement("button",{type:"submit"},r.a.createElement("i",{class:"fa fa-search"})))),0===this.state.items.length&&this.state.submitted&&!this.state.searching?r.a.createElement("h2",null,"No results found!"):this.state.searching?r.a.createElement("h2",null,"Searching..."):r.a.createElement(D,{items:this.state.items}))}}]),a}(r.a.Component);c.a.render(r.a.createElement(i.a,null,r.a.createElement("div",null,"\xa0\xa0\xa0\xa0",r.a.createElement("ul",{className:"header"},"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0",r.a.createElement("li",null,r.a.createElement(i.b,{to:"/"},"The Search App")),"\xa0\xa0\xa0\xa0\xa0"),r.a.createElement(l.d,null,r.a.createElement(l.b,{path:"/login"},r.a.createElement(h,{baseUrl:"http://localhost:8080"})),r.a.createElement(l.b,{path:"/signup"},r.a.createElement(f,{baseUrl:"http://localhost:8080"})),r.a.createElement(v,{path:"/"},r.a.createElement(x,null))))),document.getElementById("root"))}},[[36,1,2]]]);
//# sourceMappingURL=main.d2c10ac6.chunk.js.map